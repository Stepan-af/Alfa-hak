# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM –¥–ª—è AI —á–∞—Ç–∞

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞–º—è—Ç—å—é –≤ Docker

–ú–æ–¥–µ–ª—å **llama3.1:8b** (4.9 GB) —Ç—Ä–µ–±—É–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏ (~10 GB RAM) –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–∏. 

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –ª–µ–≥–∫—É—é –º–æ–¥–µ–ª—å **llama3.2:3b** (~2 GB, —Ç—Ä–µ–±—É–µ—Ç ~4 GB RAM)

## –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `llama3.2:3b` –∫–∞–∫ –º–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

## üìä –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ llama3.2:3b

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ:** 128K —Ç–æ–∫–µ–Ω–æ–≤ (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏), ~8K-16K –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤ Docker
- **–ú–∞–∫—Å. –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞:** 1000 —Ç–æ–∫–µ–Ω–æ–≤ (~700-800 —Å–ª–æ–≤) - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `chat_service.py`
- **–°–∫–æ—Ä–æ—Å—Ç—å:** ~20-50 —Ç–æ–∫–µ–Ω–æ–≤/—Å–µ–∫—É–Ω–¥—É –≤ Docker
- **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞:** –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- **Timeout:** 60 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ—Ç–≤–µ—Ç

### –ß—Ç–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

```python
# –í backend/app/services/chat_service.py (—Å—Ç—Ä–æ–∫–∞ ~356)

# –£–≤–µ–ª–∏—á–∏—Ç—å –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–∞:
"max_tokens": 2000  # –≤–º–µ—Å—Ç–æ 1000

# –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å):
"temperature": 0.5  # –Ω–∏–∂–µ = —Ç–æ—á–Ω–µ–µ, –≤—ã—à–µ = –∫—Ä–µ–∞—Ç–∏–≤–Ω–µ–µ

# –£–≤–µ–ª–∏—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ (—Å—Ç—Ä–æ–∫–∞ ~338):
for msg in messages[-10:]:  # –≤–º–µ—Å—Ç–æ [-5:]
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- ‚úÖ –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ (FAQ, –∫–æ–º–∞–Ω–¥—ã) - —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã
- ‚úÖ –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (—Å—Ç–∞—Ç—å–∏, –æ—Ç—á–µ—Ç—ã) - —É–≤–µ–ª–∏—á—å—Ç–µ `max_tokens` –¥–æ 2000-3000
- ‚ö†Ô∏è –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏ - —É–º–µ–Ω—å—à–∏—Ç–µ `max_tokens` –¥–æ 500
- ‚ö†Ô∏è –ü—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ - —É–º–µ–Ω—å—à–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ –¥–æ 3 —Å–æ–æ–±—â–µ–Ω–∏–π

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ Llama 3.1 (8B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) üî•

**–†–∞–∑–º–µ—Ä:** ~4.7 GB  
**RAM:** –ú–∏–Ω–∏–º—É–º 8 GB  
**–ö–∞—á–µ—Å—Ç–≤–æ:** –û—Ç–ª–∏—á–Ω–æ–µ –¥–ª—è –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å –≤ Ollama
docker exec -it alfacopilot-ollama ollama pull llama3.1:8b

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
docker exec alfacopilot-ollama ollama list
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏:** 5-15 –º–∏–Ω—É—Ç (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–æ–ª–µ–µ –ª–µ–≥–∫–∞—è –º–æ–¥–µ–ª—å Llama 3.2 (3B) ‚ö°

**–†–∞–∑–º–µ—Ä:** ~2 GB  
**RAM:** –ú–∏–Ω–∏–º—É–º 4 GB  
**–ö–∞—á–µ—Å—Ç–≤–æ:** –•–æ—Ä–æ—à–µ–µ, –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
docker exec -it alfacopilot-ollama ollama pull llama3.2:3b

# 2. –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª
nano .env
# –ò–∑–º–µ–Ω–∏—Ç—å: LLM_MODEL=llama3.2:3b

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API
docker restart alfacopilot-api

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker exec alfacopilot-ollama ollama list
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–∞–º–∞—è –ª–µ–≥–∫–∞—è –º–æ–¥–µ–ª—å Phi-3 Mini (3.8B) üí®

**–†–∞–∑–º–µ—Ä:** ~2.3 GB  
**RAM:** –ú–∏–Ω–∏–º—É–º 4 GB  
**–°–∫–æ—Ä–æ—Å—Ç—å:** –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
docker exec -it alfacopilot-ollama ollama pull phi3:mini

# 2. –û–±–Ω–æ–≤–∏—Ç—å .env
nano .env
# –ò–∑–º–µ–Ω–∏—Ç—å: LLM_MODEL=phi3:mini

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API
docker restart alfacopilot-api
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± (Llama 3.1)

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ –ø–æ—Ä—è–¥–∫—É:

```bash
# 1. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ (–∑–∞–π–º–µ—Ç 5-15 –º–∏–Ω—É—Ç)
docker exec -it alfacopilot-ollama ollama pull llama3.1:8b

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
docker exec alfacopilot-ollama ollama list

# 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
docker exec -it alfacopilot-ollama ollama run llama3.1:8b "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?"

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API (—á—Ç–æ–±—ã –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å –º–æ–¥–µ–ª—å)
docker restart alfacopilot-api

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ API –≤–∏–¥–∏—Ç –º–æ–¥–µ–ª—å
docker logs alfacopilot-api --tail 20
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —á–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** http://localhost:3000/chat
2. **–ù–∞–∂–º–∏—Ç–µ:** "–ù–∞—á–∞—Ç—å –±–µ—Å–µ–¥—É"
3. **–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:** "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"
4. **–ñ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç–∞** (~5-30 —Å–µ–∫—É–Ω–¥ –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "–ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
df -h

# –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã Docker (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker system prune -a
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Out of memory"

–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ RAM. –í–∞—Ä–∏–∞–Ω—Ç—ã:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –ª–µ–≥–∫—É—é –º–æ–¥–µ–ª—å (–í–∞—Ä–∏–∞–Ω—Ç 2 –∏–ª–∏ 3)
2. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã Docker Desktop

### –ü—Ä–æ–±–ª–µ–º–∞: "Chat returns 401"

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ LiteLLM –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Ollama:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps | grep alfacopilot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å
docker network inspect alfa-hak_default

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞
docker restart alfacopilot-ollama alfacopilot-litellm alfacopilot-api
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | RAM | –°–∫–æ—Ä–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|--------|-----|----------|----------|--------------|
| **llama3.1:8b** | 4.7 GB | 8 GB | –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ |
| **llama3.2:3b** | 2 GB | 4 GB | –ë—ã—Å—Ç—Ä–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê | –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| **phi3:mini** | 2.3 GB | 4 GB | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è | ‚≠ê‚≠ê‚≠ê | –î–ª—è —Ç–µ—Å—Ç–æ–≤ |

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏
docker exec alfacopilot-ollama ollama list

# –û–±–Ω–æ–≤–∏—Ç—å .env
nano .env
# LLM_MODEL=–Ω–∞–∑–≤–∞–Ω–∏–µ-–º–æ–¥–µ–ª–∏

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API
docker restart alfacopilot-api
```

### –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –º–æ–¥–µ–ª—å (–æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ)

```bash
# –£–¥–∞–ª–∏—Ç—å –º–æ–¥–µ–ª—å
docker exec alfacopilot-ollama ollama rm llama3.1:8b

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker exec alfacopilot-ollama ollama list
```

---

## üéØ –ò—Ç–æ–≥–æ: –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

```bash
# –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ - –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker exec -it alfacopilot-ollama ollama pull llama3.1:8b && \
docker restart alfacopilot-api && \
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/chat –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —á–∞—Ç"
```

–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–π–º–µ—Ç **5-15 –º–∏–Ω—É—Ç** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ AI —á–∞—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç! üöÄ
